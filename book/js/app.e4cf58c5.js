(function(e){function t(t){for(var s,a,c=t[0],r=t[1],l=t[2],u=0,b=[];u<c.length;u++)a=c[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&b.push(n[a][0]),n[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);d&&d(t);while(b.length)b.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],s=!0,c=1;c<o.length;c++){var r=o[c];0!==n[r]&&(s=!1)}s&&(i.splice(t--,1),e=a(a.s=o[0]))}return e}var s={},n={app:0},i=[];function a(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=s,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(o,s,function(t){return e[t]}.bind(null,s));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=r;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"1dbc":function(e,t,o){},"25ae":function(e,t,o){"use strict";o("1dbc")},4638:function(e,t,o){},4678:function(e,t,o){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return o(t)}function i(e){if(!o.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id="4678"},"96df":function(e,t,o){"use strict";o("4638")},cd49:function(e,t,o){"use strict";o.r(t);var s={};o.r(s),o.d(s,"bearer",(function(){return d})),o.d(s,"bookingToken",(function(){return u})),o.d(s,"bookingTokenValid",(function(){return b})),o.d(s,"loginResult",(function(){return h})),o.d(s,"bookingTokenStatus",(function(){return j})),o.d(s,"bookingTokenExpiresAt",(function(){return p})),o.d(s,"bookingsEnabled",(function(){return g})),o.d(s,"finishedCount",(function(){return f})),o.d(s,"requestsMade",(function(){return m})),o.d(s,"details",(function(){return k})),o.d(s,"finishedBookings",(function(){return O})),o.d(s,"atMaxBookings",(function(){return v})),o.d(s,"getBookingByID",(function(){return y})),o.d(s,"getFinishedByID",(function(){return w})),o.d(s,"getTimeLeftByID",(function(){return x}));var n={};o.r(n),o.d(n,"login",(function(){return T})),o.d(n,"clear",(function(){return S})),o.d(n,"deleteToken",(function(){return B})),o.d(n,"deleteBearer",(function(){return q}));var i={};o.r(i),o.d(i,"deleteBearer",(function(){return D})),o.d(i,"deleteToken",(function(){return C})),o.d(i,"incrementFinishedCount",(function(){return z})),o.d(i,"lastPoolRefresh",(function(){return A})),o.d(i,"login",(function(){return I})),o.d(i,"setToken",(function(){return P})),o.d(i,"setBookingToken",(function(){return E})),o.d(i,"setBookingTokenExpiresAt",(function(){return $})),o.d(i,"clearBookingToken",(function(){return R})),o.d(i,"incrementRequestsMade",(function(){return M})),o.d(i,"setMaxBookings",(function(){return V})),o.d(i,"setStoreDetails",(function(){return F})),o.d(i,"setStoreStatus",(function(){return _})),o.d(i,"setPoolIDs",(function(){return N})),o.d(i,"setPoolIDsStatus",(function(){return L})),o.d(i,"addPoolDescription",(function(){return U})),o.d(i,"clearPoolDescriptions",(function(){return Y})),o.d(i,"setPoolStatus",(function(){return K})),o.d(i,"replaceBookings",(function(){return H})),o.d(i,"clearBookings",(function(){return J})),o.d(i,"setBookingsStatus",(function(){return W})),o.d(i,"setBookingsEnabled",(function(){return G})),o.d(i,"deleteBooking",(function(){return Q}));var a=o("f2bf"),c=o("5502"),r=o("5a0c"),l=o.n(r);const d=e=>e.bearer,u=e=>e.bookingToken,b=e=>e.bookingTokenValid,h=e=>e.loginResult,j=e=>e.bookingTokenStatus,p=e=>e.bookingTokenExpiresAt,g=e=>e.bookingsEnabled,f=e=>e.finishedCount,m=e=>e.requestsMade,k=e=>{var t=[],o=e.lastPoolRefresh;for(const[s,n]of Object.entries(e.poolDescriptions))n.checked>=o&&t.push(n.data);return t},O=e=>e.finishedBookings.length,v=e=>e.activityBookings.length>=e.maxBookings,y=(e,t)=>t=>{var o=e.activityBookings.filter(e=>e.id===t);return o.length<1?{}:o[0].status},w=(e,t)=>t=>{try{return e.finishedBookings[t].exp<=l()().unix()}catch(o){return console.log("error checking if finished",t,o),!1}},x=(e,t)=>t=>{try{return e.finishedBookings[t].exp-l()().unix()}catch(o){return console.log("error checking if finished",t,o),-1}},T=({commit:e})=>{e("login")},S=({commit:e})=>{e("clear")},B=({commit:e})=>{e("deleteToken")},q=({commit:e})=>{e("deleteBearer")},D=e=>{e.bearer=""},C=e=>{e.token=""},z=e=>{e.finishedCount+=1},A=(e,t)=>{e.lastPoolRefresh=t},I=e=>{e.bearer="eykljdflkajsdfjlas.lkasjdfklasjdlkfjalskdf.ksdflkjaskldjflkasdjf"},P=(e,t)=>{e.token=t},E=(e,t)=>{e.bookingToken=t,e.bookingTokenValid=!0,e.bookingTokenStatus="valid",e.bookingTokenExpiresAt=0},$=(e,t)=>{e.bookingTokenExpiresAt=t},R=(e,t)=>{e.bookingToken="",e.bookingTokenValid=!1,e.bookingTokenStatus="empty",e.loginResult=t},M=e=>{e.requestsMade+=1},V=(e,t)=>{e.maxBookings=t},F=(e,t)=>{e.storeStatusDetails=t},_=(e,t)=>{e.storeStatus=t},N=(e,t)=>{e.poolIDs=t},L=(e,t)=>{e.poolIDsStatus=t},U=(e,t)=>{try{var o=t.data.id;e.poolDescriptions[o]=t}catch(s){console.log("error adding pool description",s)}},Y=e=>{console.log("DEPRECATED clearPoolDescriptions"),e.poolDescriptions=[]},K=(e,t)=>{e.poolStatus[t.id]=t},H=(e,t)=>{var o,s=[],n=[];for(o=0;o<t.length;o++){var i=t[o].description.id;s.push({id:i,status:t[o],ok:!0}),n.push(i),e.finishedBookings[i]=t[o]}e.activityBookings=s},J=(e,t)=>{e.activityBookings=[]},W=(e,t)=>{e.bookingsStatus=t},G=(e,t)=>{e.bookingsEnabled=t},Q=(e,t)=>{console.log("want to remove activity id",t.id);var o=e.activityBookings.map((function(e){return e.id})).indexOf(t.id);console.log("removing booking with id",e.activityBookings[o]),e.finishedBookings.push(e.activityBookings[o]),e.activityBookings.splice(o,1)},X={bearer:"",token:"",bookingToken:"",bookingTokenValid:!1,loginResult:"login not attempted",bookingsEnabled:!1,bookingTokenStatus:"empty",bookingTokenExpiresAt:0,maxBookings:0,storeStatus:"unknown",storeStatusDetails:null,poolIDsStatus:"unknown",poolIDs:[],poolDescriptions:{},poolStatus:{},activityBookings:[],finishedBookings:{},requestsMade:0,finishedCount:0,lastPoolRefresh:0},Z=Object(c["a"])({state:X,getters:s,actions:n,mutations:i});var ee=Z;const te=Object(a["h"])("img",{width:"300",src:"https://assets.practable.io/images/common/practable-logo-3-1980x660.png"},null,-1),oe={id:"nav"},se=Object(a["g"])("Catalogue"),ne=Object(a["g"])(" | "),ie=Object(a["g"])("About"),ae=Object(a["g"])(" | "),ce=Object(a["g"])("Cookie"),re=Object(a["h"])("p",{style:{"margin-bottom":"0.7cm"}},null,-1);function le(e,t,o,s,n,i){const c=Object(a["x"])("router-link"),r=Object(a["x"])("router-view");return Object(a["q"])(),Object(a["d"])(a["a"],null,[te,Object(a["h"])("div",oe,[Object(a["h"])(c,{to:"/"},{default:Object(a["D"])(()=>[se]),_:1}),ne,Object(a["h"])(c,{to:"/about"},{default:Object(a["D"])(()=>[ie]),_:1}),ae,Object(a["h"])(c,{to:"/cookies"},{default:Object(a["D"])(()=>[ce]),_:1})]),re,Object(a["h"])(r)],64)}var de={name:"App",components:{}};o("25ae");de.render=le;var ue=de,be=o("6c02");function he(e,t){return Object(a["q"])(),Object(a["d"])("h1",null,"Home Page")}const je={};je.render=he;const pe={class:"container-fluid"},ge=Object(a["f"])('<div class="row"><div class="col"></div><div class="col text-justify"><h1>About</h1><p> This is the booking interface for the <a href="https://practable.io">practable.io</a> non-traditional practical work system, hosted by the University of Edinburgh. </p><h3> For Users </h3><p>The booking system, and the <a href="https://practable.io">practable.io</a> system itself, are under active development. You will notice functional and cosmetic changes over time. These should be largely self-explanatory.</p><p> It&#39;s entirely possible you will find the odd issue, despite our best efforts to eliminate them. A simple page reload, or returning to the original link you received, should fix most of the issues that might crop up. We&#39;d be delighted to hear from you if you have any other issues, or feedback. Just drop us a line at <a href="mailto:support@practable.io">support@practable.io</a> with as much detail as you can manage.</p><h3> For Educators </h3><p> Practable is the core reference implemention of an emerging consensus regarding the role of remote laboratories in on-campus education. Some of the background can be found <a href="https://doi.org/10.1080/23752696.2020.1816845">here</a>.</p><h3> Adopters and Developers</h3><p> If you are a potential adopter or developer of federated remote laboratory technologies, you might be pleasantly surprised to find that all the code and hardware is open-source, for the complete feature set. We will continue to develop the code base in the open. We value the opportunity to create educational software which reflects our values. We hope you do too.</p><p> If you want to take a quick look at the software, you can find the core <a href="https://github.com/practable/relay">here</a>. Developer and adopter documentation is on our roadmap, as are support tools and services to set you up and/or keep you going / scale up. Alternatively, we can do some or all of the work for you - get in touch to discuss the options without obligation. If you have any questions, want to discuss getting some help, or simply want to let us know you might be interested in participating in the practable ecosystem in some way, let us know by emailing <a href="mailto:timothy.drysdale@ed.ac.uk">Tim</a>.</p></div><div class="col"></div></div>',1);function fe(e,t){return Object(a["q"])(),Object(a["d"])("div",pe,[ge])}const me={};me.render=fe;var ke=me;const Oe={class:"container-fluid"},ve=Object(a["f"])('<div class="row"><div class="col"></div><div class="col text-justify"><h1>Cookie</h1> This site asks your browser to store a randomly-generated code (made up of letters and numbers) in a cookie. This cookie is essential to navigating the site and securely booking out experiments. The cookie is persistant, so that you can close and reopen your browser and retain access to any experiments you have booked. You can remove the cookie at any time, by clearing your cache, however, you will lose access to any experiments you have booked. A new cookie will be generated the next time you use the site. This cookie is strictly necessary cookie, so we are exempted from asking for your consent. For more information on strictly necessary cookies please see this <a href="https://ico.org.uk/for-organisations/guide-to-pecr/guidance-on-the-use-of-cookies-and-similar-technologies/what-are-the-rules-on-cookies-and-similar-technologies/#rules9">ICO guide</a>. </div><div class="col"></div></div>',1);function ye(e,t){return Object(a["q"])(),Object(a["d"])("div",Oe,[ve])}const we={};we.render=ye;var xe=we;function Te(e,t){return Object(a["q"])(),Object(a["d"])("h1",null,"Oops, it looks like the page you're looking for doesn't exist.")}const Se={};Se.render=Te;var Be=Se;const qe={class:"container-fluid"},De=Object(a["h"])("p",{style:{"margin-bottom":"1cm"}},null,-1),Ce=Object(a["h"])("p",{style:{"margin-bottom":"1cm"}},null,-1),ze=Object(a["h"])("p",{style:{"margin-bottom":"0.3cm"}},null,-1);function Ae(e,t,o,s,n,i){const c=Object(a["x"])("enterToken"),r=Object(a["x"])("displayBookings"),l=Object(a["x"])("displayPools");return Object(a["q"])(),Object(a["d"])("div",qe,[De,Object(a["h"])(c),Ce,Object(a["h"])(r),ze,Object(a["h"])(l)])}function Ie(e,t,o,s,n,i){return null}var Pe=o("bc3a"),Ee=o.n(Pe),$e=o("c1df"),Re=o.n($e),Me=o("1232"),Ve={data(){return{stuff:null,expiresAt:null,loginToken:null,result:"empty"}},computed:{...Object(c["d"])({token:e=>e.token,bearer:e=>e.bookingToken,valid:e=>e.bookingTokenValid})},methods:{updateToken(e){this.$store.commit("setToken",e.target.value)},bookingLogin(e){var t,o;t=this.$localStorage.get("token",!1),o=t?{token:t}:{},Ee.a.post("https://book.practable.io/api/v1/login",o,{headers:{Authorization:e}}).then(e=>{this.stuff=e.data,this.expiresAt=e.data.exp,this.loginToken=e.data.token,this.$localStorage.set("token",this.loginToken),this.result=e.statusText,this.$store.commit("setBookingToken",e.data.token),this.$store.commit("setBookingTokenExpiresAt",e.data.exp),this.$store.commit("setPoolIDs",e.data.pools),this.$store.commit("setPoolIDsStatus","checked "+Re()().fromNow())},e=>{e.response?(this.loginToken="",this.result=e.response.statusText):this.result="error",this.$store.commit("clearBookingToken","login failed")})},...Object(c["b"])(["login","deleteToken"])},mounted(){var e="";try{e=String(this.$route.query.c)}catch(t){console.log("using default code because error obtaining code from query param c",t)}"undefined"!=e&&""!=e||(e="everyone"),Ee.a.get("https://assets.practable.io/tokens/"+e,{}).then(e=>{try{Object(Me["a"])(e.data);this.bookingLogin(e.data)}catch(t){console.log("could not decode token",t)}},e=>{console.log("error getting login token",e)})}};Ve.render=Ie;var Fe=Ve;const _e={class:"container-fluid"},Ne={class:"bg-primary text-left row"},Le={class:"col"},Ue=Object(a["h"])("h3",{class:"text-white"},"Your Bookings",-1),Ye={class:"text-white"},Ke={class:"container-fluid"},He={class:"row"};function Je(e,t,o,s,n,i){const c=Object(a["x"])("describe-booking");return Object(a["q"])(),Object(a["d"])("div",_e,[Object(a["h"])("div",Ne,[Object(a["h"])("div",Le,[Ue,Object(a["h"])("h6",Ye,Object(a["z"])(e.status),1)])]),Object(a["h"])("div",Ke,[Object(a["h"])("div",He,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(e.details,(e,t)=>(Object(a["q"])(),Object(a["d"])(c,{description:e,index:t,key:e.id},null,8,["description","index"]))),128))])])])}const We={class:"card mb-3",style:{"max-width":"540px"}},Ge={class:"row no-gutters"},Qe={class:"col-md-4"},Xe={class:"col-md-8"},Ze={class:"card-body"},et={class:"card-title"},tt={class:"card-text text-secondary"},ot={class:"container"},st={class:"row"},nt={class:"col"},it={class:"card-text"},at={class:"text-muted"},ct={class:"col"},rt={class:"dropup"},lt=Object(a["g"])(" Open "),dt=Object(a["h"])("span",{class:"caret"},null,-1);function ut(e,t,o,s,n,i){return Object(a["q"])(),Object(a["d"])("div",We,[Object(a["h"])("div",Ge,[Object(a["h"])("div",Qe,[Object(a["h"])("img",{src:e.image,class:"card-img",alt:e.title},null,8,["src","alt"])]),Object(a["h"])("div",Xe,[Object(a["h"])("div",Ze,[Object(a["h"])("h5",et,Object(a["z"])(e.title),1),Object(a["h"])("p",tt,Object(a["z"])(e.about),1),Object(a["h"])("div",ot,[Object(a["h"])("div",st,[Object(a["h"])("div",nt,[Object(a["h"])("p",it,[Object(a["h"])("small",at,Object(a["z"])(e.status),1)])]),Object(a["h"])("div",ct,[Object(a["h"])("div",rt,[Object(a["h"])("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.open&&e.open(...t)),class:"btn btn-success",id:"open"},[lt,dt])])])])])])])])])}var bt=o("1157"),ht=o.n(bt),jt={props:["description","key","index"],components:{},computed:{title:function(){return this.description.name},image:function(){return this.description.image},id:function(){return this.description.id},what:function(){return this.description.short},about:function(){return this.description.long},status:function(){var e=this;return setTimeout((function(){e.$store.commit("incrementFinishedCount")}),1e3*(this.description.exp-l()().unix())),"Now until "+l.a.unix(this.description.exp).format("h:mm A")},...Object(c["d"])({bookingTokenValid:e=>e.bookingTokenValid,bookingToken:e=>e.bookingToken,poolStatus:e=>e.poolStatus,details:e=>e.poolDescriptions,ids:e=>e.poolIDs})},methods:{open(){var e="/activity/"+this.id;this.$router.push({path:e})}}};jt.render=ut;var pt=jt,gt={components:{"describe-booking":pt},methods:{getStatus(){Ee.a.get("https://book.practable.io/api/v1/login",{headers:{Authorization:this.bookingToken}}).then(e=>{var t="";try{e.data.locked?(t="Bookings are currently suspended. "+e.data.msg,this.$store.commit("setBookingsEnabled",!1)):(t=" You can have up to "+e.data.max+" bookings at a time. "+e.data.msg,this.$store.commit("setBookingsEnabled",!0),this.$store.commit("setMaxBookings",e.data.max))}catch(o){t="Booking system status unknown"}this.$store.commit("setBookingsStatus",t),this.$store.commit("replaceBookings",e.data.activities)},()=>{this.$store.commit("setBookingsStatus","No bookings found when checked at "+l()().format("h:mm A"))})}},computed:{details:function(){var e,t;for(e=[],t=0;t<this.fulldetails.length;t++){var o;o=this.fulldetails[t].status.description,o["exp"]=this.fulldetails[t].status.exp,e.push(o)}return e},...Object(c["d"])({bookingTokenValid:e=>e.bookingTokenValid,bookingToken:e=>e.bookingToken,status:e=>e.bookingsStatus,fulldetails:e=>e.activityBookings,ids:e=>e.poolIDs}),...Object(c["c"])(["atMaxBookings","requestsMade","finishedCount"])},watch:{bookingToken(){this.bookingTokenValid&&this.getStatus()},requestsMade(){this.getStatus(),setTimeout(this.getStatus,2e3)},finishedCount(){setTimeout(this.getStatus,1500)}}};gt.render=Je;var ft=gt;const mt={class:"container-fluid"},kt={class:"bg-secondary row mb-2"},Ot={class:"col"},vt=Object(a["h"])("h3",{class:"text-white text-left"},"Your Catalogue",-1),yt={class:"text-white text-left"},wt=Object(a["h"])("div",{class:"col"},null,-1),xt=Object(a["h"])("div",{class:"col"},null,-1),Tt={class:"row"},St={class:"row"};function Bt(e,t,o,s,n,i){const c=Object(a["x"])("describe-pool");return Object(a["q"])(),Object(a["d"])("div",mt,[Object(a["h"])("div",kt,[Object(a["h"])("div",Ot,[vt,Object(a["h"])("h6",yt,[e.disableRefresh?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])("button",{key:0,class:"btn btn-light",onClick:t[1]||(t[1]=t=>e.getStatus()),disabled:e.disableRefresh},"refresh",8,["disabled"])),Object(a["g"])(" "+Object(a["z"])(e.status),1)])]),wt,xt]),Object(a["h"])("div",Tt,[Object(a["E"])(Object(a["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.poolFilter=t),placeholder:"filter..."},null,512),[[a["B"],e.poolFilter]])]),Object(a["h"])("div",St,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(e.filteredDetails,(t,o)=>(Object(a["q"])(),Object(a["d"])(c,{description:t,index:o,key:t.id,enabled:e.canBook},null,8,["description","index","enabled"]))),128))])])}const qt={class:"card mb-3",style:{"max-width":"540px"}},Dt={class:"row no-gutters"},Ct={class:"col-md-4"},zt={class:"col-md-8"},At={class:"card-body"},It={class:"card-title"},Pt={class:"card-text text-secondary"},Et={key:0,class:"container"},$t={class:"row"},Rt={class:"col"},Mt={class:"card-text"},Vt={class:"text-muted"},Ft={class:"col"},_t={class:"dropup"},Nt=Object(a["g"])(" Request "),Lt=Object(a["h"])("span",{class:"caret"},null,-1),Ut={class:"dropdown-menu",role:"menu","aria-labelledby":"menu1"},Yt=Object(a["h"])("a",{role:"menuitem",href:"#",id:"btn2"},"Now for 60 min",-1),Kt=Object(a["h"])("a",{role:"menuitem",href:"#",id:"btn3"},"Now for 30 min",-1),Ht=Object(a["h"])("a",{role:"menuitem",href:"#",id:"btn3"},"Now for 10 min",-1),Jt=Object(a["h"])("a",{role:"menuitem",href:"#",id:"btn3"},"Now for 5 min",-1),Wt={key:1,class:"container"},Gt={key:0,class:"row bg-success"},Qt={class:"col text-white text-center align-middle"},Xt={key:1,class:"row bg-danger"},Zt={class:"col text-white text-center align-middle"};function eo(e,t,o,s,n,i){return Object(a["q"])(),Object(a["d"])("div",qt,[Object(a["h"])("div",Dt,[Object(a["h"])("div",Ct,[Object(a["h"])("img",{src:e.image,class:"card-img",alt:e.title},null,8,["src","alt"])]),Object(a["h"])("div",zt,[Object(a["h"])("div",At,[Object(a["h"])("h5",It,Object(a["z"])(e.title),1),Object(a["h"])("p",Pt,Object(a["z"])(e.what),1),e.bookingAttempted?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])("div",Et,[Object(a["h"])("div",$t,[Object(a["h"])("div",Rt,[Object(a["h"])("p",Mt,[Object(a["h"])("small",Vt,Object(a["z"])(e.status),1)])]),Object(a["h"])("div",Ft,[Object(a["h"])("div",_t,[Object(a["h"])("button",{type:"button",class:"btn btn-primary dropdown-toggle",id:"requestmenu","data-toggle":"dropdown",disabled:!e.enabled},[Nt,Lt],8,["disabled"]),Object(a["h"])("ul",Ut,[Object(a["h"])("li",{onClick:t[1]||(t[1]=t=>e.request(60)),role:"presentation"},[Yt]),Object(a["h"])("li",{onClick:t[2]||(t[2]=t=>e.request(30)),role:"presentation"},[Kt]),Object(a["h"])("li",{onClick:t[3]||(t[3]=t=>e.request(10)),role:"presentation"},[Ht]),Object(a["h"])("li",{onClick:t[4]||(t[4]=t=>e.request(5)),role:"presentation"},[Jt])])])])])])),e.bookingAttempted?(Object(a["q"])(),Object(a["d"])("div",Wt,[e.bookingOK?(Object(a["q"])(),Object(a["d"])("div",Gt,[Object(a["h"])("div",Qt,Object(a["z"])(e.result),1),Object(a["h"])("span",{onClick:t[5]||(t[5]=t=>e.closeResult()),class:"close-button topright"},"×")])):Object(a["e"])("",!0),e.bookingOK?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])("div",Xt,[Object(a["h"])("div",Zt,Object(a["z"])(e.result),1),Object(a["h"])("span",{onClick:t[6]||(t[6]=t=>e.closeResult()),class:"close-button topright"},"×")]))])):Object(a["e"])("",!0)])])])])}var to={props:["description","key","index","enabled"],data(){return{bookingAttempted:!1,bookingOK:!1,result:"No booking attempted"}},components:{},computed:{title:function(){return this.description.name},image:function(){return this.description.image},what:function(){return this.description.short},about:function(){return this.description.long},status:function(){var e=this.poolStatus[this.description.id];if(ht.a.isEmptyObject(e))return"Status unavailable";if(!e.ok)return"Status unavailable";if(0==e.status.available){var t="Unavailable";return e.status.later&&(t="Available again soon"),e.status.used&&(t=t+" ("+e.status.used+"/"+e.status.used+" in use)"),t}var o=0;e.status.used&&(o=e.status.used);var s=o+e.status.available;return"Available now: "+e.status.available+"/"+s},...Object(c["d"])({bookingTokenValid:e=>e.bookingTokenValid,bookingToken:e=>e.bookingToken,poolStatus:e=>e.poolStatus,details:e=>e.poolDescriptions,ids:e=>e.poolIDs})},methods:{closeResult(){this.bookingAttempted=!1},request(e){var t=this.description.id,o=60*e;Ee.a.post("https://book.practable.io/api/v1/pools/"+t+"/sessions?duration="+o,{},{headers:{Authorization:this.bookingToken}}).then(()=>{this.bookingAttempted=!0,this.bookingOK=!0,this.result='OK - click on activity in "Your Bookings" to start'},e=>{this.bookingAttempted=!0,this.bookingOK=!1;var t="Sorry: ";e.response?t+=e.response.data:t+="this pool is not currently available",this.result=t,console.log(t)}),this.$store.commit("incrementRequestsMade"),this.getStatus()},getStatus(){var e=this.description.id;Ee.a.get("https://book.practable.io/api/v1/pools/"+e+"/status",{headers:{Authorization:this.bookingToken}}).then(t=>{this.$store.commit("setPoolStatus",{id:e,status:t.data,ok:!0})},t=>{this.$store.commit("setPoolStatus",{id:e,status:t,ok:!1})})}},created(){this.getStatus()}};o("96df");to.render=eo;var oo=to,so={components:{"describe-pool":oo},data(){return{poolFilter:"",disableRefresh:!0}},methods:{enableRefresh(){this.disableRefresh=!1},getStatus(){var e;for(this.disableRefresh=!0,setTimeout(this.enableRefresh,6e4),this.$store.commit("lastPoolRefresh",l()().unix()),e=0;e<this.ids.length;e++)Ee.a.get("https://book.practable.io/api/v1/pools/"+this.ids[e],{headers:{Authorization:this.bookingToken}}).then(e=>{this.$store.commit("setPoolIDsStatus","Checked at "+l()().format("h:mm A")),this.$store.commit("addPoolDescription",{checked:l()().unix(),data:e.data})},e=>{this.$store.commit("setPoolIDsStatus","Last check failed at "+l()().format("h:mm A"))})}},computed:{canBook(){return this.bookingsEnabled&&!this.atMaxBookings},filteredDetails(){var e=this.poolFilter.toLowerCase(),t=this.details;if(t.sort((e,t)=>e.name>t.name?1:-1),""==e)return t;var o=t.filter(t=>t.name.toLowerCase().includes(e));return o},...Object(c["d"])({bookingTokenValid:e=>e.bookingTokenValid,bookingToken:e=>e.bookingToken,status:e=>e.poolIDsStatus,ids:e=>e.poolIDs}),...Object(c["c"])(["bookingsEnabled","atMaxBookings","finishedCount","details"])},watch:{bookingToken(e,t){this.bookingTokenValid&&this.getStatus()},finishedCount(e,t){console.log("Finished Booking"),this.getStatus()}}};so.render=Bt;var no=so,io={name:"Login",components:{enterToken:Fe,displayPools:no,displayBookings:ft}};io.render=Ae;var ao=io;const co=Object(a["h"])("h3",null,"Modal",-1),ro=Object(a["h"])("div",null," hello ",-1),lo=Object(a["h"])("p",{style:{"margin-bottom":"3cm"}},null,-1);function uo(e,t,o,s,n,i){const c=Object(a["x"])("Test"),r=Object(a["x"])("Vue3FormComponent");return Object(a["q"])(),Object(a["d"])("div",null,[co,ro,Object(a["h"])(c),lo,Object(a["h"])(r)])}const bo={key:0},ho=Object(a["g"])(" Do you agree? ");function jo(e,t,o,s,n,i){return Object(a["q"])(),Object(a["d"])("div",null,[Object(a["h"])("button",{onClick:t[1]||(t[1]=(...t)=>e.show&&e.show(...t))},"Show modal"),e.visible?(Object(a["q"])(),Object(a["d"])("div",bo,[ho,Object(a["h"])("button",{onClick:t[2]||(t[2]=t=>e.tell("agree"))},"I Agree"),Object(a["h"])("button",{onClick:t[3]||(t[3]=t=>e.tell("decline"))},"I Decline")])):Object(a["e"])("",!0),Object(a["h"])("span",null,"Result: "+Object(a["z"])(e.result),1)])}function po(){let e=()=>{};const t=Object(a["u"])(!1),o=()=>(t.value=!0,new Promise(t=>{e=t})),s=o=>{t.value=!1,e(o)};return{visible:Object(a["t"])(t),ask:o,tell:s}}var go=Object(a["i"])({name:"Test",setup(){const{visible:e,ask:t,tell:o}=po();let s=Object(a["u"])("");const n=async()=>{console.log("awaiting user"),s.value=await t()};return{show:n,visible:e,tell:o,result:s}}});go.render=jo;var fo=go;const mo=Object(a["h"])("button",{type:"submit"},"Submit",-1),ko=Object(a["g"])(" Do you agree? ");function Oo(e,t,o,s,n,i){const c=Object(a["x"])("base-modal");return Object(a["q"])(),Object(a["d"])("form",{onSubmit:t[3]||(t[3]=Object(a["F"])((...t)=>e.handleSubmit&&e.handleSubmit(...t),["prevent"]))},[mo,Object(a["h"])(c,{visible:e.visible},{default:Object(a["D"])(()=>[ko]),actions:Object(a["D"])(()=>[Object(a["h"])("button",{onClick:t[1]||(t[1]=t=>e.tell(!0))},"I Agree"),Object(a["h"])("button",{onClick:t[2]||(t[2]=t=>e.tell(!1))},"I Decline")]),_:1},8,["visible"])],32)}const vo={key:0},yo=Object(a["g"])(" Are you sure that you want to do something potentially dangerous? ");function wo(e,t,o,s,n,i){return e.visible?(Object(a["q"])(),Object(a["d"])("div",vo,[Object(a["w"])(e.$slots,"default",{},()=>[yo]),Object(a["w"])(e.$slots,"actions",{},()=>[Object(a["h"])("button",{onClick:t[1]||(t[1]=Object(a["F"])(t=>e.$emit("confirmation",!0),["prevent"]))},"Proceed")])])):Object(a["e"])("",!0)}var xo=Object(a["i"])({name:"BaseModal",props:["visible"]});xo.render=wo;var To=xo,So=Object(a["i"])({name:"Vue3FormComponent",components:{BaseModal:To},setup(){console.log("confirmationModal:setup");const{visible:e,ask:t,tell:o}=po(),s=Object(a["s"])({title:"hello world"}),n=async()=>{console.log("Awaiting modal thing...."),console.log("vis?",e);const o=await t();o?console.log("CHOICE YES"):console.log("CHOICE NO")};return{form:s,handleSubmit:n,visible:e,tell:o}}});So.render=Oo;var Bo=So,qo={name:"Modal",components:{Test:fo,Vue3FormComponent:Bo}};qo.render=uo;var Do=qo;const Co={class:"container-fluid"},zo={class:"row"};function Ao(e,t,o,s,n,i){const c=Object(a["x"])("launch-activity");return Object(a["q"])(),Object(a["d"])("div",Co,[Object(a["h"])("div",zo,[Object(a["h"])(c,{id:e.id,setTimer:e.setTimer},null,8,["id","setTimer"])])])}const Io={class:"container-fluid"},Po=Object(a["h"])("div",{class:"row"},[Object(a["h"])("div",{class:"col bg-secondary"},[Object(a["h"])("h3",{class:"text-white text-left"}," Your hardware ")])],-1),Eo={class:"row"},$o=Object(a["h"])("div",{class:"row"},[Object(a["h"])("div",{class:"col bg-primary"},[Object(a["h"])("h3",{class:"text-white text-left"}," Choose your interface"),Object(a["h"])("h6",{class:"text-white text-left"}," You can come back here to change interfaces as often as you like")])],-1),Ro={key:0,class:"row"};function Mo(e,t,o,s,n,i){const c=Object(a["x"])("describe-activity"),r=Object(a["x"])("describe-ui");return Object(a["q"])(),Object(a["d"])("div",Io,[Po,Object(a["h"])("div",Eo,[e.dataloaded?(Object(a["q"])(),Object(a["d"])(c,{key:0,id:e.id,booking:e.booking},null,8,["id","booking"])):Object(a["e"])("",!0)]),$o,e.dataloaded?(Object(a["q"])(),Object(a["d"])("div",Ro,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(e.userinterfaces,(t,o)=>(Object(a["q"])(),Object(a["d"])(r,{ui:t,config:e.config,streams:e.streams,exp:e.exp,index:o,key:t.id},null,8,["ui","config","streams","exp","index"]))),128))])):Object(a["e"])("",!0)])}const Vo={class:"row no-gutters"},Fo={class:"col-md-4"},_o={class:"col-md-8"},No={class:"card-body"},Lo={class:"card-title"},Uo={class:"card-text"},Yo={class:"container"},Ko={class:"row"},Ho={class:"col"},Jo={class:"card-text"},Wo={class:"text-muted"};function Go(e,t,o,s,n,i){return e.dataloaded?(Object(a["q"])(),Object(a["d"])("div",{class:"card mb-3",style:{"max-width":"540px"},key:e.id},[Object(a["h"])("div",Vo,[Object(a["h"])("div",Fo,[Object(a["h"])("img",{src:e.image,class:"card-img",alt:e.title},null,8,["src","alt"])]),Object(a["h"])("div",_o,[Object(a["h"])("div",No,[Object(a["h"])("h5",Lo,Object(a["z"])(e.title),1),Object(a["h"])("p",Uo,Object(a["z"])(e.about),1),Object(a["h"])("div",Yo,[Object(a["h"])("div",Ko,[Object(a["h"])("div",Ho,[Object(a["h"])("p",Jo,[Object(a["h"])("small",Wo,Object(a["z"])(e.status),1)])])])])])])])])):Object(a["e"])("",!0)}var Qo={props:["booking","id"],computed:{title:function(){return this.booking.hasOwnProperty("description")?this.booking.description.name:""},image:function(){return this.booking.hasOwnProperty("description")?this.booking.description.image:""},what:function(){return this.booking.hasOwnProperty("description")?this.booking.description.short:""},about:function(){return this.booking.hasOwnProperty("description")?this.booking.description.long:""},status:function(){return"Now until "+l.a.unix(this.booking.exp).format("h:mm A")},dataloaded:function(){return this.booking!={}},...Object(c["c"])(["getBookingByID"])}};Qo.render=Go;var Xo=Qo;const Zo={class:"card mb-3",style:{"max-width":"540px"}},es={class:"row no-gutters"},ts={class:"col-md-4"},os={class:"col-md-8"},ss={class:"card-body"},ns={class:"card-title"},is={class:"card-text text-secondary"},as={class:"container"},cs={class:"row"},rs=Object(a["h"])("div",{class:"col"},null,-1),ls={class:"col"},ds={class:"dropup"},us=Object(a["g"])(" Use now "),bs=Object(a["h"])("span",{class:"caret"},null,-1);function hs(e,t,o,s,n,i){return Object(a["q"])(),Object(a["d"])("div",Zo,[Object(a["h"])("div",es,[Object(a["h"])("div",ts,[Object(a["h"])("img",{src:e.image,class:"card-img",alt:e.title},null,8,["src","alt"])]),Object(a["h"])("div",os,[Object(a["h"])("div",ss,[Object(a["h"])("h5",ns,Object(a["z"])(e.title),1),Object(a["h"])("p",is,Object(a["z"])(e.what),1),Object(a["h"])("div",as,[Object(a["h"])("div",cs,[rs,Object(a["h"])("div",ls,[Object(a["h"])("div",ds,[Object(a["h"])("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.open&&e.open(...t)),class:"btn btn-success",id:"open"},[us,bs])])])])])])])])])}var js=o("9dbb"),ps=o.n(js),gs={props:["config","exp","streams","ui"],components:{},computed:{title:function(){return this.ui.description.name},image:function(){return this.ui.description.image},what:function(){return this.ui.description.short},about:function(){return this.ui.description.long},...Object(c["d"])({bookingTokenValid:e=>e.bookingTokenValid,bookingToken:e=>e.bookingToken,poolStatus:e=>e.poolStatus,details:e=>e.poolDescriptions,ids:e=>e.poolIDs})},methods:{open(){var e,t,o,s,n=this.ui.url,i=this.config,a=this.exp;try{e=JSON.stringify(this.streams)}catch(c){return console.log(c,"could not stringify streams - try without!"),o=ps.a.render(n,{streams:"",exp:a}),void window.open(o,"_blank")}try{t=encodeURIComponent(e),s=encodeURIComponent(i.url)}catch(c){return console.log(c,"could not uriEncode streams or config - try without encoding!"),o=ps.a.render(n,{config:i.url,streams:e,exp:a}),void window.open(o,"_blank")}try{o=ps.a.render(n,{config:s,streams:t,exp:a})}catch(c){return console.log("error rendering uri, try unrendered version",c),void window.open(n,"_blank")}window.open(o,"_blank")}}};gs.render=hs;var fs=gs,ms={props:["id","setTimer"],components:{"describe-activity":Xo,"describe-ui":fs},computed:{userinterfaces:function(){return this.booking.uis},config:function(){return this.booking.config},streams:function(){return this.booking.streams},exp:function(){return this.booking.exp},dataloaded:function(){return this.booking!={}},booking:function(){var e=this.id;return this.getBookingByID(e)},...Object(c["c"])(["getBookingByID"])},methods:{open(){console.log("opening ui page for  ",this.description.id)}}};ms.render=Mo;var ks=ms,Os={name:"Activity",components:{"launch-activity":ks},data(){return{timerSet:!1}},computed:{id:function(){return this.$route.params.id},setTimer:function(){var e=this.id;if(!e)return!1;var t=this.getTimeLeftByID(e);return t>0&&!this.timerSet?(console.log("setting Timer for ",t),setTimeout(this.goBack,1e3*t),this.timerSet=!0,!0):this.timerSet},...Object(c["c"])(["getTimeLeftByID"])},methods:{goBack(){console.log("going back"),this.$router.back()}},watch:{$route(e,t){console.log("Activity:",e,t)}}};Os.render=Ao;var vs=Os;const ys=[{path:"/",name:"Home",component:ao},{path:"/about",name:"About",component:ke},{path:"/cookies",name:"Cookies",component:xe},{path:"/login",name:"Login",component:ao},{path:"/modal",name:"Modal",component:Do},{path:"/activity/:id",name:"Activity",component:vs},{path:"/:catchAll(.*)",component:Be}],ws=Object(be["a"])({history:Object(be["b"])("/book/"),routes:ys});function xs(e){return!!Object.keys(e.query).length}ws.beforeEach((e,t,o)=>{!xs(e)&&xs(t)?o({...e,query:t.query}):o()});var Ts=ws,Ss=o("2510");o("4989"),o("ab8b");const Bs=Object(a["c"])(ue);Bs.use(ee).use(Ts).use(Ss["a"]),Bs.mount("#app")}});
//# sourceMappingURL=app.e4cf58c5.js.map